"use strict";function shuffle(t){for(var e=t.length,i=0;i<e-1;i++){var n=Math.floor(Math.random()*(e-i)),s=t[n];t[n]=t[e-i-1],t[e-i-1]=s}return t}function defaultEvent(t){void 0!==t&&(t.addEventListener("touchstart",function(t){}),t.addEventListener("touchend",function(t){}),t.addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation()}))}var Game=function(t){this.times=t.times,this.ele=t.ele,this.title=t.title,this.time=t.time,this.length=t.length,this.correct=0,this.fail=!1,this.successCall=t.success,this.failCall=t.fail,this.word=["建","喃","楠","趾","楠","陛","院","建","楠","南","楠","宇","趾","隶","趾","迎","迎","宅","趾","康","隶","仰","迎","此","此","此","止","宇","养","美","建","健","此","此","养","此"],0!=$(this.ele).length&&(this.$ele=$(this.ele),0!=$(this.title).length&&(this.$title=$(this.title),0!=$(this.time).length&&(this.$time=$(this.time),this.newWord=[])))};Game.prototype.init=function(){this.correctAnimation(0)},Game.prototype.correctAnimation=function(t){this.newWord=shuffle(this.word);for(var e="",i=0;i<this.newWord.length;i++)e+="<span>"+this.newWord[i]+"</span>";this.$ele.html(e),this.$title.find("span").eq(t).addClass("on");var n=this.$title.find(".on").last().offset().left,s=this.$title.find(".on").last().width();this.$title.find("i").css({left:n+s/2})},Game.prototype.play=function(){this.init();var t=this;t.$time.find("span").html(t.times);var e=setInterval(function(){t.times--,t.$time.find("span").html(t.times),t.times<=0&&(clearTimeout(e),t.failCall(),t.$ele.html(""),this.fail=!0)},1e3);this.$ele[0].addEventListener("touchend",function(i){if(!t.fail){var i=i||window.event,n=i.target||i.srcElement,s=n.nodeName.toLowerCase();if("span"==s&&$(n).text()==t.$title.find("span").eq(t.correct).text()){if(t.correct++,t.correct==t.length)return clearTimeout(e),t.successCall(t.times),void t.$ele.html("");t.correctAnimation(t.correct)}}})};